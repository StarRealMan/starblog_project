title: 技术传承——永磁同步电机驱动1
date: 2020-02-21 12:16:00
categories: 控制
tags: []
---
记得当时是2018年寒假，加入机器人队不满半年，老余前辈开发出了机器人队历史上第一款好用的永磁同步电机驱动，当时的我也是真的懵，电机种类也不懂，电机原理也不会，恰巧哨兵需要一款新的yaw轴云台电机，而我又是哨兵控制的负责人，顺理成章的我就成了这款驱动的第一个实验品。
一开始我是把他当作一个产品来用的，但是在使用过程中难免不会产生一些问题，我要到了源码，开启了我无刷驱动研究的大坑
在这一年间，我从开始的一点也不会，到中间的 啥都懂一点，啥都不明白，到现在的初识foc算法，逆变器原理等基础知识，真的是历尽千辛万苦，十分感谢老余带我走上了这条控制的不归路。
这次我主要讲一下 永磁同步电机中坐标变换的部分，有错误希望大家指出！
首先问大家个问题：为什么要坐标变换？
 1. Clark变换是为了将三相电流变换为两相正交电流，为Park变换做准备
 2. Park变换是为了将定子电流坐标变换到转子上，最终我们的所有控制都是在转子上的
 3. 反Park变换时为了将控制量（电压）反推回定子端，以便进行SVPWM调制
由此可见，坐标变换体现在驱动的方方面面。
## Clark变换 ##
Clark变换又分为两种形式：1、等幅值变换；2、等功率变换
为什么会这样分呢，我们先来看一下他们俩的不同。
![Clark1.PNG][1]
等幅值变换
![clark.PNG][2]
等功率变换

**原来只是矩阵前面的系数有差别啊！**
我们能发现，Clark变换大体就是把三相电流都向alpha、beta两正交轴投影，再将其相加。但是这前面这个系数又是怎么来的呢？
但实际上，这个变换就是把原本存在三相上的电流抽象成了两项正交电流，而且为了保证抽象前后幅值不变，它带了一个系数2/3（由三相脉振磁场合成的旋转磁场幅值是原来的3/2），这就是等幅值变换
等功率变换又是什么呢？为了使变换前后功率相等，即电压*电流相等，最终变换的系数变为了sqrt(2/3),这就是等功率变换。
等幅值变换与等功率变换仅仅是两种不同的坐标变换，得到的电流有着不同的比例，其中等幅值变换拥有与测量电流同样的比例，所以我们一般使用等幅值变换。还要注意的是，使用两种变换由于电流比例不同，得到的力矩常数也不同，甚至永磁体磁链也不同，它们之间的都差一个常数sqrt（2/3）！
## Park变换 ##
**相对于Clark变换，Park变换就更加容易理解了!**
![Park.PNG][3]
如上图所示，Park变换仅仅就是把定子坐标系变换到转子坐标系上，方便我们做控制（直接在定子上做其实也不是不行。。。），随后再用反变换变换到定子来输出电压。
要注意的一点是公式中的theta指的是电角度thetaP，即实际机械角度的p倍（p为电机极对数）
为什么要用thetP做变换呢？
对于p对极的电机，磁场的变化是每360°/p的机械角度变化一周期，也就是360°电角度变化一周期，
所以，永磁体磁链总是相对于转子静止的，力矩、强弱磁也仅仅是与q、d轴上的电流有关，所以我们要把电流变换到转子上。

**今天这期我们主要讨论了基础的坐标变换理论，下期我们来讲解一下永磁电机中转子坐标下的控制方法。**

  [1]: /old_images/2020/02/2324103181.png
  [2]: /old_images/2020/02/3086867647.png
  [3]: /old_images/2020/02/4018005133.png
